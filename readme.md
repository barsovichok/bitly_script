## Скрипт для общения с bitly

Это небольшой скрипт в рамках решения задачки для Devman. Он умеет коннектиться с API bit.ly и отдавать статистику по кликам по короткой ссылке за сегодняшний день, либо превращать любую ссылку в bitly-ccылку. 


## Подключение к bit.ly

Все запросы к  API bit.ly должны быть с токеном авторизации, иначе вы получите ошибку 403. Как получить токен:
1) Зарегистрируйтесь на сайте 
2) Войти на сайт
3) Нажать на свой профиль, отобразится вкладка EDIT PROFILE
4) На вкладке найти Generic Access Token, нажать. Сервис попросит ввести пароль от аккаунта, и полсе этого сгенерирует токен (примерно такого вида - e9c66c0785d4074a4749ac8784535545459b)
5) В папке, где вы сохранили скрипт, создайте файл .env, и запишите туда данные:
TOKEN=e9c66c0785d4074a4749ac8784535545459b
Не забудьте сохранить файл.
После этого можете запускать скрипт, токен подтянется с помощью модуля python-dotenv.

## Как запустить скрипт

1) Cохраните себе репозиторий локально. Для этого выберите на странице репозиторию Clone or Download, нажмите Download Zip. После завершения скачивания архива распакуйте архив в выбранную вами директорию.

Python3 должен быть уже установлен. Затем используйте pip (или pip3, если есть конфликт с Python2) для установки зависимостей.
В командной строке перейдите в директорию, где был распакован архив, и введите:
```
pip install -r requirements.txt
```
У вас запустится установка пакетов, необходимых для выполнения скрипта. 
2) После успешной установки всех пакетов в командной строке введите 

```python3 main.py https://docs.python.org/3.6/howto/argparse.html
```
3) В ответ вам вернется статистика по ссылке, короткая ссылка или сообщение об ошибке (примеры работы скрипта ниже).

## Примеры кода:
### Создание bitly-ссылки:

```
$python3 main.py https://docs.python.org/3.6/howto/argparse.html

Ответ скрипта:
{"created_at":"1970-01-01T00:00:00+0000","id":"bit.ly/2RS1hw1","link":"http://bit.ly/2RS1hw1","custom_bitlinks":[],"long_url":"https://docs.python.org/3.6/howto/argparse.html","archived":false,"tags":[],"deeplinks":[],"references":{"group":"https://api-ssl.bitly.com/v4/groups/BicpcJpo06a"}}

```

### Статистика по cуществующей ссылке:

```
ВАЖНО: передавать именно bit.ly/2RS1hw1, без https:// впереди, так как мы передаём не ссылку, а id ссылки в сервисе bit.ly

$python3 main.py bit.ly/2RS1hw1

Ответ скрипта:
{"unit_reference":"2019-01-16T15:16:39+0000","total_clicks":0,"units":-1,"unit":"day"}

```
### Обработка ошибки:

```
$python3 main.py fdfdfd

Ответ скрипта:
You add the wrong link, please restart the script

```

Если у вас возникнут вопросы, можете писать в Телеграм https://t.me/TanyaKulagina.
